# Poverty and Gender Inequality: Alignment with the Sustainable Development Goals

```{r setup, include=FALSE}
#knitr::opts_chunk$set(echo = F, message = F, warning = F, fig.width=9.5, fig.height=6)

# Install necessary libraries
require(tidyverse)
require(gghighlight)
require(knitr)
require(kableExtra)
require(readxl)
require(rio)

# Load data
Poverty_UNSDG <- read_excel("Data/Poverty_UNSDG.xlsx")
Marriage_UNSDG <- import("Data/Goal5 - all groupings.xlsx", col_types = "text")
```

## Poverty in Relation to SDG 1

```{r yearColumns, include = FALSE}
# SDG 1 Analysis

# Firstly, identifying the year columns and changing from wide formatting to long formatting:

Pov_long <- Poverty_UNSDG %>%
            pivot_longer(cols = starts_with("20"), 
                         names_to = "Year", 
                         values_to = "PovertyRate",
                         values_drop_na = TRUE) %>%
            mutate(Year = as.numeric(Year))


Pov_latest <- Pov_long %>%
              group_by(GeoAreaCode) %>%
              slice_max(order_by = Year, n = 1, with_ties = FALSE) %>%
              ungroup() %>%
              select(GeoAreaCode, PovertyRate)

```

```{r filterIndicator, include = FALSE}
# Filtering initial data by just data for indicator 4.1.2 (school completion)

Edu_completion <- Data %>%
                  filter(Indicator == "4.1.2") %>%   
                  filter(Sex == "BOTHSEX") %>%            
                  filter(!is.na(Value)) %>%
                  group_by(GeoAreaCode) %>%
                  slice_max(order_by = TimePeriod, n = 1, with_ties = FALSE) %>% 
                  ungroup() %>%
                  select(GeoAreaCode, GeoAreaName, Continent, CompletionRate = Value)

```

```{r merge, include = FALSE}
# Merging data sets by location and year:

Edu_completion <- Edu_completion %>%
                  mutate(GeoAreaCode = as.character(GeoAreaCode))

Pov_latest <- Pov_latest %>%
              mutate(GeoAreaCode = as.character(GeoAreaCode))

EduPov <- Edu_completion %>%
          left_join(Pov_latest, by = "GeoAreaCode") %>%
          filter(!is.na(PovertyRate), !is.na(CompletionRate))

```

```{r povertyCategorization, include = FALSE}
# Creating Poverty catagories and ordering them from low to moderate to high.

EduPov <- EduPov %>%
          mutate(PovertyGroup = case_when(PovertyRate < 10 ~ "Low poverty (<10%)",
                                          PovertyRate < 30 ~ "Moderate poverty (10–30%)",
                                          TRUE             ~ "High poverty (>30%)"
          ))

EduPov$PovertyCategory <- factor(EduPov$PovertyGroup,
                                 levels = c("Low poverty (<10%)",
                                             "Moderate poverty (10–30%)",
                                             "High poverty (>30%)")
                                  )

```

```{r povertyPlot, echo = FALSE, out.width= "80%", fig.cap="Sourced From SDG4 Global Database (Indicators 1.1.1 and 4.1.2) based on a joint database of SDG1 and SDG4 databases"}
ggplot(EduPov, aes(PovertyCategory, CompletionRate)) +
  geom_boxplot(fill = "navy", alpha = 0.7, outlier.alpha = 0.2) +
  labs(title = "Educational Completion Rates by Poverty Category",
        subtitle = "Latest available data — Higher poverty countries show substantially lower completion",
        x = "Poverty category",
        y = "Completion rate (%)") +
  theme_minimal(base_size = 14)

```

Figure 4.1 illustrates the relationship between national poverty levels (SDG 1.1.1: proportion of population below the international poverty line) and school completion rates (SDG 4.1.2). The pattern is clear: higher poverty is strongly associated with lower educational completion.

Low-poverty countries (<10%):

Display the highest completion rates, typically between 85–100%, with very little variation. 
This suggests that once extreme poverty is minimised, education systems tend to operate with stable, near-universal completion.

Moderate-poverty countries (10–30%):

Show significantly more variation, with completion rates ranging from 30% to 90%.
The wide spread indicates inconsistent education performance despite similar poverty levels—reflecting differences in governance, conflict, rural access, and policy investment.

Finally, high-poverty countries (>30%):

Exhibit the lowest median completion rates, often below 50%, and include many observations near zero.
This highlights a cycle where extreme poverty directly suppresses school participation, especially in regions affected by food insecurity, child labour, and limited infrastructure.

Overall, these results provide evidence of a strong and systematic linkage between SDG 1 (poverty reduction) and SDG 4 (quality education). Countries struggling with high poverty are disproportionately unable to sustain educational progress, reinforcing the idea that SDG targets cannot be pursued in isolation. 

### Recommendations

Stage two analysis should incorporate longitudinal analysis to assess whether improvements in poverty translate into educational gains.
We would also recommend looking into joint modelling of poverty, gender, and location to address SDGs 1, 4, and 5 together for a strong stage 2 analysis.

\newpage

## Gender Inequality in Relation to SDG 5

```{r dataFunctions, include = FALSE}
chars_to_factors_except <- function(df, iDontLike) {
  df %>% mutate(across(!all_of(iDontLike),as.factor))
}

changeToFactor <- function(df, cols){
  df %>% mutate(across(all_of(cols),as.factor))
}

changeToNumber <- function(df, cols){
  df %>% mutate(across(all_of(cols),as.numeric))
}
```

```{r Goal5cleaningData, include = FALSE}
# SDG 5 Analysis

# Filter out data needed to calculate completion rate
goal4Data <- subset(Data, Indicator == "4.1.2") %>%
              select(GeoAreaCode, GeoAreaName, TimePeriod, Sex, Completion_rate = Value, `Education level`)

# Data reprocessing
goal5Data <- Marriage_UNSDG %>% 
              changeToNumber(c("TimePeriod", "Value")) %>%
              changeToFactor(c("GeoAreaCode", "GeoAreaName", "Sex", "SeriesDescription")) %>%
              # Filter out data needed to calculate proportion of women married or in a union before age 15 and 18
              subset(Indicator == "5.3.1") %>%
              select(GeoAreaCode, GeoAreaName, TimePeriod, Sex, SeriesDescription, Early_marrige_rate = Value)
```

```{r mergeData, include = FALSE}
# Join all married female data in a single data frame
marriedFemales <- merge(goal4Data, goal5Data, 
                        by = c("GeoAreaCode", "GeoAreaName", "TimePeriod", "Sex"))

# Reformat early marriage rates into levels
marriedFemales$"Early Marrige Rate" <- cut(marriedFemales$Early_marrige_rate,
                                           breaks = c(0, 10, 30, Inf),
                                           labels = c("Low (<10%)", "Moderate (10-30%)", "High (>30%)"),
                                           right = FALSE)
head(marriedFemales)

```

Sustainable Development Goal 5 (SDG 5) explicitly addresses gender equality and emphasizes the inequalities faced by women. For instance, target 5.3 identifies barriers that limit women's educational opportunities. These barriers can impact SDG 4, which aims to ensure inclusive and equitable quality education and promote lifelong learning opportunities for all. 

```{r marriagePlot, out.width="80%", fig.cap="Sourced From SDG4 Global Database (Indicator 4.1.2 and 5.3.1) based on a joint database of SDG4 and SDG5 databases"}
# Produce plot of completion rates against early marriage rates
ggplot(data = marriedFemales, aes(x = `Early Marrige Rate`, y = Completion_rate)) +
        geom_boxplot(aes(fill = `Early Marrige Rate`)) +
        facet_grid(. ~ SeriesDescription, 
                   labeller = labeller(SeriesDescription = 
                   c("Proportion of women aged 20-24 years who were married or in a union before age 15 (%)" = "Before age 15",
                    "Proportion of women aged 20-24 years who were married or in a union before age 18 (%)" = "Before age 18"))) +

        # Improve plot labels and theme
        labs(title = "Impact of Early Marriage on Female Education Comp. Rates",
             x = "Proportion of Early Marriages and Unions (%)",
             y = "Female Education Completion Rates (%)",
             subtitle = "Early Marriage Trends Among Women") +
        theme(legend.position = "none",
              plot.title = element_text(size = 15)) +
        scale_fill_brewer(palette = "Pastel1")

```

Figure 4.2 illustrates the relationship between educational completion rates (Indicator 4.1.2) and early marriage (Indicator 5.3.1). The data reveals a clear negative trend: as early marriage rates increase, educational completion significantly decreases for both age groups. While the range of completion rates varies, the median values confirm that early marriage acts as a barrier to educational attainment, reinforcing gender inequality in outcomes.

This visual trend is supported by literature. Postponing marriage by a single year is associated with an increase in schooling attainment of nearly 0.5 years in Sub-Saharan Africa and approximately 0.33 years in South-West Asia [@DELPRATO201542]. Furthermore, delaying marriage improves educational perseverance, reducing the likelihood of secondary school drop-out by approximately 5.5%. This confirms that later marriage contributes to both higher attainment and greater academic stability.

In terms of specific age demographics, the rate of marriage for those under 15 does not exceed 30%. Comparing the two groups reveals that women married between ages 15 and 18 demonstrate substantially better completion rates—evident in both the median and box range—than those married by age 15. (Note that the under-18 dataset cumulatively includes those married by age 15).

Finally, a key limitation of this plot is its exclusive focus on female data. The absence of equivalent information on early-married men prevents a comparative analysis, leaving a gap in our understanding of how early marriage differentially affects educational attainment across genders.

### Recommendations

+ Provide support for young married women by ensuring access to nursery facilities, mentorship initiatives, a supportive community, and specialized supervision. 

+ Conduct further research on young married men and analyze the impact of marriage on their educational status, comparing this data with that of early married women.


Addressing the challenges faced by young married women alongside poverty in lower-income countries is essential for promoting gender equality and educational outcomes. This approach can create a more equitable and inclusive educational environment.